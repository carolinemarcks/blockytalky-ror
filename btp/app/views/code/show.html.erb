<% content_for :head do %>
    <%= render partial: "blocklyInitialization" %>
<% end %>

<%= form_for @code, :html => { :id => "codeForm"}, method: :put do |f| %>
    <%= render partial: "codeForm", locals: {f: f, code: @code} %>
<% end %>

<%= render partial: "codeSavingButtons" %>
<% if @code.versions.count >= 1 %>
    <% if not @code.version %>
        <%= link_to "Previous version", version_code_path(@code.id, @code.versions.last.index) %>
    <% elsif @code.version.index >= 1 %>
        <%= link_to "Previous version", version_code_path(@code.id, @code.version.previous.index) %>
    <% end %>

    <% if @code.version %>
        <% if @code.version.next %>
            <%= link_to "Next version", version_code_path(@code.id, @code.version.next.index) %>
        <% else %>
            <%= link_to "Next version", code_path(@code.id) %>
        <% end %>
    <% end %>
<% end %>
